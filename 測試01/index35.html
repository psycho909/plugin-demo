<!DOCTYPE html>
<html lang="zh-Hant">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>模式切換 - 合理重複 / 相容做法</title>
		<style>
			:root {
				--mobile-width: 430px; /* iPhone 16 Pro Max 模擬寬 */
			}

			body {
				font-family: "Microsoft JhengHei", sans-serif;
				margin: 0;
				padding: 20px;
				background: #f5f5f5;
				transition: 0.25s;
			}
			header {
				background: linear-gradient(135deg, #4e54c8, #6c63ff);
				color: #fff;
				padding: 16px;
				border-radius: 10px;
				margin-bottom: 16px;
				text-align: center;
			}
			.btn-group {
				text-align: center;
				margin-bottom: 16px;
			}
			button {
				padding: 8px 14px;
				margin: 6px;
				border-radius: 8px;
				border: 0;
				background: #4e54c8;
				color: #fff;
				cursor: pointer;
			}
			#view.content {
				max-width: 1100px;
				margin: 0 auto;
				text-align: left;
				padding: 20px;
				transition: 0.25s;
			}
			.card {
				background: #e7e7ff;
				padding: 16px;
				border-radius: 10px;
				margin-bottom: 12px;
				font-size: 18px;
			}

			/* 你原本的 media query（針對視窗寬度）*/
			@media (max-width: 768px) {
				#view.content {
					padding: 12px;
				}
				.card {
					font-size: 16px;
					border-radius: 12px;
					background: #d1f7c4;
				}
				.card:nth-child(odd) {
					background: #c4f0f7;
				}
			}

			/* 為了在桌機上用 .mobile-mode 強制套用手機樣式：重複必要的 selector（只重複要變化的）*/
			.mobile-mode .device-frame {
				width: var(--mobile-width);
				height: 932px;
				margin: 20px auto;
				border: 16px solid #222;
				border-radius: 40px;
				background: #fff;
				box-shadow: 0 0 40px rgba(0, 0, 0, 0.28);
				overflow: auto;
			}
			.mobile-mode .device-inner {
				padding: 12px;
				background: #f9f9f9;
				border-radius: 20px;
			}
			.mobile-mode .card {
				font-size: 16px;
				border-radius: 14px;
				background: #d1f7c4;
				box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08);
				transform: scale(0.99);
			}
			.mobile-mode .card:nth-child(odd) {
				background: #c4f0f7;
			}

			/* 可選：自動縮放，使得整個手機視窗在大螢幕上比較不會超出 */
			.mobile-mode {
				display: flex;
				justify-content: center;
			}
			.mobile-mode .device-frame {
				transform: scale(0.95);
				transform-origin: top center;
			}
		</style>
	</head>
	<body>
		<header>
			<h1>模式切換範例（兼容版）</h1>
			<p>保留原本 @media，並用 .mobile-mode 強制模擬（只重複需變動的 selector）</p>
		</header>

		<div class="btn-group">
			<button onclick="setDesktop()">💻 桌機模式</button>
			<button onclick="setMobile()">📱 iPhone 16 Pro Max 模擬</button>
		</div>

		<!-- device-frame 是手機模擬外殼；桌機模式時不會有外框 -->
		<div id="host">
			<!-- 在桌機模式我們直接顯示 view；在 mobile-mode 我們把 content 包到 device-frame 裡顯示-->
			<div id="view" class="content device-inner">
				<div class="card">卡片 1 — 內容示範</div>
				<div class="card">卡片 2 — 內容示範</div>
				<div class="card">卡片 3 — 內容示範</div>
				<div class="card">卡片 4 — 內容示範</div>
				<div class="card">卡片 5 — 內容示範</div>
			</div>
		</div>

		<script>
			function setMobile() {
				document.body.classList.add("mobile-mode");

				// 把 #view 包到 .device-frame 裡（避免在桌機模式跑外框）
				const host = document.getElementById("host");
				if (!host.querySelector(".device-frame")) {
					const frame = document.createElement("div");
					frame.className = "device-frame";
					// 將原本的 view 移進 device-frame，並改樣式名稱
					const view = document.getElementById("view");
					view.classList.add("device-inner"); // already set but safe
					host.replaceChild(frame, view);
					frame.appendChild(view);
				}
			}

			function setDesktop() {
				document.body.classList.remove("mobile-mode");
				// 把 view 從 device-frame 拿回 host
				const host = document.getElementById("host");
				const frame = host.querySelector(".device-frame");
				if (frame) {
					const view = frame.querySelector("#view");
					host.replaceChild(view, frame);
					view.classList.remove("device-inner");
				}
			}
		</script>
	</body>
</html>
